-- 프로젝트 테이블
CREATE TABLE TB_JPL_PROJECT (
	JPL_PRJ_SRN	INT(10)	NOT null AUTO_INCREMENT 	COMMENT '프로젝트일련번호',
	JPL_USER_ID	VARCHAR(30)	NOT NULL	COMMENT '사용자ID',
	JPL_PRJ_NM	VARCHAR(50)	NOT NULL	COMMENT '프로젝트명',
	JPL_PRJ_IDX	INT(1)	NOT NULL	COMMENT '프로젝트인덱스',
	DEL_YN	VARCHAR(1)	NOT NULL	COMMENT '삭제여부',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	PRIMARY KEY (JPL_PRJ_SRN)
);

-- 사용자 테이블
CREATE TABLE TB_JPL_USER (
	JPL_USER_ID	VARCHAR(30)	NOT NULL	COMMENT '사용자ID',
	JPL_USER_PW	VARCHAR(100)	NOT NULL	COMMENT '패스워드',
	JPL_USER_PHONE	VARCHAR(20)	NULL	COMMENT '전화번호',
	DEL_YN	VARCHAR(1)	NOT NULL	COMMENT '삭제여부',
	JOIN_OUT_DATE	VARCHAR(1)	NULL	COMMENT '탈퇴일시',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	PRIMARY KEY (JPL_USER_ID)
);

-- TODO 테이블
CREATE TABLE TB_JPL_TASK (
	JPL_TASK_SRN	INT(10)	NOT null AUTO_INCREMENT 	COMMENT 'TODO일련번호',
	JPL_PRJ_SRN	INT(10)	NOT NULL	COMMENT '프로젝트일련번호',
	JPL_TASK_NM	VARCHAR(50)	NOT NULL	COMMENT 'TODO명',
	JPL_TASK_IDX	INT(2)	NULL	COMMENT 'TODO인덱스',
	JPL_TASK_FN_YN	VARCHAR(1)	NOT NULL	COMMENT 'TODO완료여부',
	JPL_TASK_FN_TS	TIMESTAMP	NULL	COMMENT 'TODO목표일시',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	PRIMARY KEY (JPL_TASK_SRN),
	FOREIGN KEY (JPL_PRJ_SRN) REFERENCES TB_JPL_PROJECT(JPL_PRJ_SRN)
);

-- 진행단계 테이블
CREATE TABLE TB_JPL_TASK_STATUS (
	JPL_TASK_STAT_SRN	INT(10)	NOT null AUTO_INCREMENT 	COMMENT '진행단계일련번호',
	JPL_PRJ_SRN	INT(10)	NOT NULL	COMMENT '프로젝트일련번호',
	JPL_TASK_STAT_NM	VARCHAR(50)	NOT NULL	COMMENT '진행단계명',
	JPL_TASK_STAT_IDX	INT(1)	NOT NULL	COMMENT '진행단계인덱스',
	DEL_YN	VARCHAR(1)	NOT NULL	COMMENT '삭제여부',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	PRIMARY KEY (JPL_TASK_STAT_SRN),
	FOREIGN KEY (JPL_PRJ_SRN) REFERENCES TB_JPL_PROJECT(JPL_PRJ_SRN)
);

-- TODO 상세 테이블
CREATE TABLE TB_JPL_TASK_DETAIL (
	JPL_TASK_DTL_SRN	INT(10)	NOT null AUTO_INCREMENT 	COMMENT 'TODO상세일련번호',
	JPL_TASK_SRN	INT(10)	NOT NULL	COMMENT 'TODO일련번호',
	JPL_TASK_DTL_NM	VARCHAR(50)	NOT NULL	COMMENT 'TODO상세명',
	JPL_TASK_DTL_IDX	INT(2)	NULL	COMMENT 'TODO상세인덱스',
	JPL_TASK_DTL_FN_YN	VARCHAR(1)	NOT NULL	COMMENT 'TODO완료여부',
	JPL_TASK_DTL_FN_TS	VARCHAR(1)	NOT NULL	COMMENT 'TODO완료일시',
	DEL_YN	VARCHAR(1)	NOT NULL	COMMENT '삭제여부',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	PRIMARY KEY (JPL_TASK_DTL_SRN),
	FOREIGN KEY (JPL_TASK_SRN) REFERENCES TB_JPL_TASK(JPL_TASK_SRN)
);

-- 설정 테이블
CREATE TABLE TB_JPL_VISIBLE_SETTING (
	JPL_PRJ_SRN	INT(10)	NOT NULL	COMMENT '프로젝트일련번호',
	TASK_VISIBLE_YN	VARCHAR(1)	NOT NULL	COMMENT '상세명표시여부',
	TS_VISIBLE_YN	VARCHAR(1)	NOT NULL	COMMENT '기간표시여부',
	D_DAY_VISIBLE_YN	VARCHAR(1)	NOT NULL	COMMENT 'DDay표시여부',
	FN_CNT_VISIBLE_YN	VARCHAR(1)	NOT NULL	COMMENT '완료수표시여부',
	TASK_DTL_VISIBLE_YN	VARCHAR(1)	NOT NULL	COMMENT 'TODO상세표시여부',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	FOREIGN KEY (JPL_PRJ_SRN) REFERENCES TB_JPL_PROJECT(JPL_PRJ_SRN)
);

-- 진행단계TODO관계 테이블
CREATE TABLE JPL_TASK_STATUS_RELATION (
	JPL_TASK_STAT_SRN	INT(10)	NOT null 	COMMENT '진행단계일련번호',
	JPL_TASK_SRN	INT(10)	NOT NULL	COMMENT 'TODO일련번호',
	JPL_TASK_STAT_REL_TS	TIMESTAMP	NOT NULL	COMMENT '등록일시',
	JPL_FRRG_TS	TIMESTAMP	NOT NULL	COMMENT '최초등록일시',
	JPL_FRRG_NM	VARCHAR(20)	NOT NULL	COMMENT '최초등록자',
	JPL_LSMD_TS	TIMESTAMP	NOT NULL	COMMENT '최종수정일시',
	JPL_LSMD_NM	VARCHAR(20)	NOT NULL	COMMENT '최종수정자',
	FOREIGN KEY (JPL_TASK_STAT_SRN) REFERENCES TB_JPL_TASK_STATUS(JPL_TASK_STAT_SRN),
	FOREIGN KEY (JPL_TASK_SRN) REFERENCES TB_JPL_TASK(JPL_TASK_SRN)
);
